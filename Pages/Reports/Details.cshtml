@page
@model ProyectoReportes.Pages.Reports.DetailsModel

@{
    ViewData["Title"] = "Detalles de Reportes";
    Layout = "_Layout";
}

<div class="p-6 bg-white dark:bg-gray-900 shadow-lg rounded-xl">
    <h2 class="text-2xl font-bold text-purple-800 dark:text-purple-300 mb-4">üìã Reportes Pendientes</h2>

    @if (Model.Incidents.Count == 0)
    {
        <p class="text-gray-500">No tienes reportes pendientes.</p>
    }
    else
    {
        <div class="overflow-x-auto">
            <table class="w-full border-collapse border border-gray-300 dark:border-gray-700">
                <thead class="bg-purple-600 text-white">
                    <tr>
                        <th class="p-3">ID</th>
                        <th class="p-3">Descripci√≥n</th>
                        <th class="p-3">Direcci√≥n</th>
                        <th class="p-3">Fecha</th>
                        <th class="p-3">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var incident in Model.Incidents)
                    {
                        <tr class="border-b dark:border-gray-700">
                            <td class="p-3 text-center">@incident.IncidentId</td>
                            <td class="p-3">@incident.Description</td>
                            <td class="p-3">@incident.Address</td>
                            <td class="p-3 text-center">@incident.OccurredAt.ToString("dd/MM/yyyy")</td>
                            <td class="p-3 text-center">
                                <div class="flex gap-2 justify-center">
                                    <form method="post">
                                        <input type="hidden" name="id" value="@incident.IncidentId" />
                                        <button formaction="?handler=MarkAsResolved" type="submit"
                                            class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition">
                                            ‚úî Resolver
                                        </button>
                                    </form>

                                    <form method="post" onsubmit="return confirm('¬øSeguro que deseas eliminar este reporte?');">
                                        <input type="hidden" name="id" value="@incident.IncidentId" />
                                        <button formaction="?handler=Delete" type="submit"
                                            class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition">
                                            ‚ùå Eliminar
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>